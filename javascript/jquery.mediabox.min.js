(function(a){if(window.MediaBox!==undefined){return;}if(!a.support.transition||a().transition===undefined){a.fn.transition=a.fn.animate;}window.MediaBox=function(c){var i="next";
var f={version:"2.0.3",stack:[],current:0,previous:0,element:"a.mediabox",gallery:".media-gallery",exclude:".no-lightbox",duration:500,shift:25,easing:"linear",is_open:false,storage:{},transit_support:false,is_animating:false,_queue:[],init:function(){f.cotainer=a("<div/>").hide().attr("id","mediabox-window").addClass("mediabox-window");
var k=a("<div/>").addClass("mediabox-background").appendTo(f.cotainer);f.preloader=a("<span/>").addClass("mediabox-preloader").appendTo(f.cotainer).hide();
f.controls=a("<div/>").addClass("mediabox-controls").appendTo(f.cotainer);f.controls.prev=a("<a/>").addClass("mediabox-prev").appendTo(f.controls);f.controls.close=a("<a/>").addClass("mediabox-close").appendTo(f.controls);
f.controls.next=a("<a/>").addClass("mediabox-next").appendTo(f.controls);var l=a("<div/>").addClass("mediabox-title").appendTo(f.cotainer);f.title=a("<div/>").addClass("mediabox-title-wrapper").appendTo(l).hide();
var m=a("<div/>").attr("id","mediabox-media").addClass("mediabox-media").appendTo(f.cotainer);f.media=a("<div/>").addClass("mediabox-media-wrapper").appendTo(m);
f.bg_closer=a("<div/>").addClass("mediabox-background-closer").appendTo(f.media);a("body").append(f.cotainer);f.storage.element=f.getElementsString();f.storage.gallery=f.getGalleriesString();
f.transit_support=!a.support.transition||a().transition===undefined?false:true;},next:function(){if(f.current<f.stack.length-1){f.previous=f.current;f.current++;
f.queue();}},prev:function(){if(f.current>0){f.previous=f.current;f.current--;f.queue();}},queue:function(){var k=f.stack[f.current];f._queue.push(k);if(f._queue.length===1){f.load(f._queue[0]);
}},load:function(k){f.open();f.before();f.slideOut(function(){if(f._queue.length>1){var n=f.stack[f.current];f._queue=[];f._queue.push(n);f.load(f._queue[0]);
return;}if(k.title!==undefined){f.setTitle(k.title);}else{f.setTitle("");}for(var m in f.types){var l=f.types[m](k.url,k.attrs);if(l){f.push(l.attr(k.attrs));
break;}}f._queue=[];});},push:function(l){function k(){if(l&&l.jquery){l.css({"max-height":a(window).height()-40});}}if(l&&l.jquery){k();f.cotainer.off("mediabox.resize",k);
f.cotainer.on("mediabox.resize",k);f.media.children().not(".mediabox-background-closer").remove();f.media.append(l);if(l.is("img")||l.is("iframe")){l.load(function(){f.checkDirectionNav();
f.slideIn();});}else{f.checkDirectionNav();f.slideIn();}}},open:function(){if(f.stack.length===0){f.hideDirectionNav();}else{f.showDirectionNav();}if(!f.is_open){f.media.children().not(".mediabox-background-closer").remove();
f.cotainer.css({opacity:0}).show().transition({opacity:1},f.duration,f.easing);f.is_open=true;}d();},close:function(){f._queue=[];f.cotainer.css({opacity:1}).show().transition({opacity:0},f.duration,f.easing,function(){f.cotainer.css({opacity:0}).hide();
});f.current=0;f.previous=0;f.stack=[];f.is_open=false;f.unload();f.title.transition({opacity:0,},f.duration,f.easing,function(){a(this).hide();});e();
},slideOut:function(k){f.media.transition({opacity:0,x:f.getDirection()==="next"?0-parseInt(f.shift,10):parseInt(f.shift,10),left:!f.transit_support?f.getDirection()==="next"?0-parseInt(f.shift,10):parseInt(f.shift,10):"auto"},f.duration,f.easing,function(){f.preloader.fadeIn("fast");
if(k){k();}});f.title.transition({opacity:0,},f.duration,f.easing,function(){a(this).hide();});},slideIn:function(){f.preloader.fadeOut({complete:function(){f.media.css({opacity:0,x:f.getDirection()==="next"?parseInt(f.shift,10):0-parseInt(f.shift,10),left:!f.transit_support?f.getDirection()==="next"?parseInt(f.shift,10):0-parseInt(f.shift,10):"auto"}).transition({opacity:1,x:0,left:!f.transit_support?0:"auto"},f.duration,f.easing,function(){f.after();
});if(f.title.text().trim()!==""){f.title.css({opacity:0}).show().transition({opacity:1},f.duration,f.easing);}if(!f.is_open){f.current=0;f.previous=0;
f.stack=[];f.media.children().not(".mediabox-background-closer").remove();}}});},setTitle:function(k){if(k!==undefined){f.title.html(k);}},hideDirectionNav:function(){f.controls.prev.hide();
f.controls.next.hide();},showDirectionNav:function(){f.controls.prev.show();f.controls.next.show();},checkDirectionNav:function(){if(f.current>0){f.controls.prev.removeClass("mediabox-hidden-control");
}else{f.controls.prev.addClass("mediabox-hidden-control");}if(f.current<f.stack.length-1){f.controls.next.removeClass("mediabox-hidden-control");}else{f.controls.next.addClass("mediabox-hidden-control");
}},getDirection:function(){var k="next";if(f.current<f.previous){k="prev";}return k;},getGalleriesString:function(){var k=f.gallery.split(",");for(var l=0;
l<k.length;l++){k[l]=k[l].trim()+" a";}k=f.arrayUnique(k);return k.join(", ");},getElementsString:function(){return f.element;},addGallery:function(k){var l=f.gallery.split(",");
l.push(k);l=f.arrayUnique(l);f.gallery=l.join(", ");h();},removeGallery:function(k){var l=f.gallery.split(",");a.each(l,function(m){if(this.trim()==k.trim()){l.splice(m,1);
}});l=f.arrayUnique(l);f.gallery=l.join(", ");h();},addElement:function(k){var l=f.element.split(",");a.each(l,function(m){l[m]=l[m].trim();});l.push(k);
l=f.arrayUnique(l);f.element=l.join(", ");h();},removeElement:function(k){var l=f.element.split(",");a.each(l,function(m){if(this.trim()==k.trim()){l.splice(m,1);
}});l=f.arrayUnique(l);f.element=l.join(", ");h();},arrayUnique:function(k){var m=[];for(var l=0;l<k.length;l++){if(m.indexOf(k[l])==-1){m.push(k[l]);}}return m;
},types:{image:function(m,l){var k=m?m.match(/^.*\.(jpeg|jpg|gif|png)$/):null;if(k){var n=a("<img/>");return n.attr({src:m});}},youtube:function(m,l){var k=m?m.match(/^.*((youtu.be\/)|(v\/)|(watch\?))v?=?([^#\&\?]*).*/):null;
if(k){var n=a("<iframe webkitAllowFullScreen mozallowfullscreen allowFullScreen />");return n.attr({frameborder:0,src:"http://www.youtube.com/embed/"+k[k.length-1],width:640,height:480});
}},vimeo:function(m,l){var k=m?m.match(/^.*(vimeo.com)\/(\d+)/):null;if(k){var n=a("<iframe webkitAllowFullScreen mozallowfullscreen allowFullScreen />");
return n.attr({frameborder:0,src:"http://player.vimeo.com/video/"+k[k.length-1]});}},web:function(m,l){var k=m?m.match(/^(http[s]?:\/\/){0,1}(www\.){0,1}[a-zA-Z0-9\.\-]+\.[a-zA-Z]{2,5}[\.]{0,1}/):null;
if(k){var n=a("<iframe/>");return n.attr({frameborder:0,src:m,width:640,height:480});}},html:function(m,l){var k=m?m.match(/^\#/):null;if(k){var n=a(m).clone().show();
var o=a("<div/>").addClass("mediabox-html-element-wrapper");return o.css({"max-width":a(window).width(),"max-height":a(window).height()}).append(n);}}},before:function(){},after:function(){},unload:function(){}};
a.extend(true,f,c);function h(){a(document).off("click",f.storage.element.toString());a(document).off("click",f.storage.gallery.toString());a(document).on("click",f.getElementsString(),function(m){m.preventDefault();
var l=a(this).attr("href");var k={};var n="";if(a(this).attr("data-dimension")){k.width=a(this).attr("data-dimension").split("x")[0];k.height=a(this).attr("data-dimension").split("x")[1];
}if(a(this).attr("title")){n=a(this).attr("title");}f.stack=[];f.stack.push({url:a(this).attr("href"),attrs:k,title:a(this).attr("title")?a(this).attr("title"):""});
f.queue();return false;});a(document).on("click",f.getGalleriesString(),function(n){var m=a(this);if(m.is(a(f.exclude))){return true;}var k=a(f.gallery).has(this);
var l=a(k).find("a").not(f.exclude);f.stack=[];if(m.parent(f.gallery).length==1){f.current=m.index();}else{f.current=l.index(m);}l.each(function(){var o={};
if(a(this).attr("data-dimension")){o.width=a(this).attr("data-dimension").split("x")[0];o.height=a(this).attr("data-dimension").split("x")[1];}var p={url:a(this).attr("href"),attrs:o,title:a(this).attr("title")?a(this).attr("title"):""};
f.stack.push(p);});if(f.current>-1){f.queue();}return false;});f.cotainer.off("click");f.cotainer.on("click",".mediabox-controls>a",function(k){k.preventDefault();
if(a(this).hasClass("mediabox-close")){f.close();}else{if(a(this).hasClass("mediabox-prev")){f.prev();}else{if(a(this).hasClass("mediabox-next")){f.next();
}}}return false;});f.cotainer.on("click",".mediabox-background-closer",function(k){f.close();});f.storage.element=f.getElementsString();f.storage.gallery=f.getGalleriesString();
}function d(){if(window.Hammer&&f.is_open){var l=document;var k={drag:true,dragLockToAxis:true,dragBlockHorizontal:true};f.hammer=new Hammer(l,k);f.hammer.on("swipeleft",b);
f.hammer.on("swiperight",g);f.hammer.on("pinchin",j);}}function e(){if(f.hammer){f.hammer.off("swipeleft");f.hammer.off("swiperight");f.hammer.off("pinchin");
delete f.hammer;}}function b(k){k.gesture.preventDefault();f.next();}function g(k){k.gesture.preventDefault();f.prev();}function j(k){k.gesture.preventDefault();
f.close();}a(window).on("resize",function(){if(f.cotainer!==undefined&&f.cotainer.trigger){f.cotainer.trigger("mediabox.resize");}});if(a(".mediabox-window").length===0){f.init();
h();}return f;};})(jQuery);if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"");};}