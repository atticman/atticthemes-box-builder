var atticthemes_box_builder;var atbb_settings;(function(g){if(window.atticthemes_box_builder_json===undefined){return;}var p;var m=g("#postdivrich");var c=g(".atbb-editor-tabs");var b=g(".wp-editor-tabs");var d=g("#wp-content-wrap");var h=g("#wp-content-editor-container, #content-resize-handle, #post-status-info");var a=g("#publish");try{atbb_settings=JSON.parse(window.atticthemes_box_builder_json);var j=g("#"+atbb_settings.id);if(j.length===0){return;}p=j.parent();j.prependTo(p);}catch(l){console.error("Parsing error:",l);return;}var i=g("<button/>",{type:"button","class":"atbb-switch-builder"}).hide();i.text("Box Builder");b.prepend(i);atticthemes_box_builder={widgets:{}};g("form").has(a).find('input[type="submit"]').on("click.boxbuilder keypress.boxbuilder",function(u,t){var r=g(this);var v=r.attr("id");var s=g("form").has(this);if(t){s.data("submit",true);}s.data("submitter","#"+v);});g("form").has(a).on("submit.boxbuilder",function(u,t){var r=g.Event(u.originalEvent);var s=g(this);
if(atticthemes_box_builder.builder===undefined){return true;}console.log(r.type,t);if(r.type==undefined&&t==undefined){atticthemes_box_builder.builder.output();return true;}if(r.type==undefined&&t){console.log(window.onbeforeunload);return true;}atticthemes_box_builder.builder.events.one("savelayouts",function(w,v){console.log(v);g(window).off("beforeunload");s.trigger("submit.boxbuilder",[true]);});atticthemes_box_builder.builder.save();return false;});c.find("a, button").not(".atbb-switch-builder").on("click",function(s){s.preventDefault();var r=g(this).attr("data-switch");j.hide();m.show();switchEditors.go("content",r);g(window).trigger("scroll");return false;});g(".atbb-switch-builder").on("click",function(r){r.preventDefault();j.show();m.hide();g(window).trigger("scroll");if(atticthemes_box_builder.builder===undefined){f();}return false;});window.BoxBuilderWidget=function(r,e){if(!r){console.error("A widget must have a name.");return;}if(!e||!e instanceof Object){console.error("Second argument must be an object.");
return;}if(!isBoxBuilderWidgetDisabled(r)){atticthemes_box_builder.widgets[r]=e;}return e;};window.isBoxBuilderWidgetDisabled=function(e){if(!atbb_settings.disabled_widgets){return false;}if(atbb_settings.disabled_widgets.indexOf(e)<0){return false;}else{return true;}};function f(e){atticthemes_box_builder.builder=new k(atbb_settings,atticthemes_box_builder.widgets);atticthemes_box_builder.builder.events.on("builder:ready",function(){if(e){e();}});}function k(N,z){var J=this;var v=g("#"+atbb_settings.id);var C=N.namespace;J.widgets={};J.namespace=C;J.data=N.data;J.layouts_total=0;J.groups_total=0;J.content=g(".atbb-content",v);J.controls=g(".atbb-controls",v);J.widget_selector=new t();J.has_DOM_updated=false;J.events=v;J.history=new B();J.exporter=new D();J.importer=new u();J.content_version_field=g(".atbb-content-version-field");var Q=g(".atbb-add-layout",v);var M=g(".atbb-save-layout",v);var P=g(".atbb-redo");var e=g(".atbb-undo");var H=g(".atbb-import",v);var O=g(".atbb-export",v);function F(){g.extend(true,J.widgets,z);
J.content.sortable({items:"> .atbb-layout-group",handle:".atbb-layout-group-header",tolerance:"pointer",placeholder:"atbb-layout-group-placeholder",start:function(R,S){S.placeholder.css({height:S.helper.outerHeight()});},stop:function(R,S){J.onReorder();if(J.has_DOM_updated){J.has_DOM_updated=false;J.history.add();}},update:function(){J.onReorder();J.has_DOM_updated=true;}});J.loading=g("<div/>",{id:"atbb-loading"}).hide().appendTo(J.content);g("<span/>",{"class":"atbb-clock-long-hand preloading-x2"}).appendTo(J.loading);g("<span/>",{"class":"atbb-clock-short-hand preloading"}).appendTo(J.loading);J.build(J.data);Q.on("click",function(R){R.preventDefault();if(g(this).hasClass("atbb-disabled")){return false;}new E();J.onReorder();J.history.add();});M.on("click",function(R){R.preventDefault();if(g(this).hasClass("atbb-disabled")){return false;}g(this).removeClass("fa-save").addClass("fa-clock-o atbb-disabled atbb-saving");J.save();});J.events.on("savelayouts",function(S,R){if(R.status==="success"){M.removeClass("fa-clock-o atbb-disabled atbb-saving").addClass("fa-save");
}else{M.removeClass("fa-clock-o").addClass("fa-times");M.attr({title:R.message});alert(R.message);}});J.history.add();J.history.onChange=function(){if(J.history.now===0){g(".atbb-undo").addClass("atbb-disabled");}else{g(".atbb-undo").removeClass("atbb-disabled");}if(J.history.now===J.history.entries-1){g(".atbb-redo").addClass("atbb-disabled");}else{g(".atbb-redo").removeClass("atbb-disabled");}};e.on("click",function(S){S.preventDefault();if(g(this).hasClass("atbb-disabled")){return false;}var R=J.history.undo();if(R){J.clear();J.build(R);}});P.on("click",function(S){S.preventDefault();if(g(this).hasClass("atbb-disabled")){return false;}var R=J.history.redo();if(R){J.clear();J.build(R);}});O.on("click",function(R){R.preventDefault();if(g(this).hasClass("atbb-disabled")){return false;}J.exporter.open();});H.on("click",function(R){R.preventDefault();if(g(this).hasClass("atbb-disabled")){return false;}J.importer.open();});}J._import=function(S){var R=JSON.parse(decodeURIComponent(atob(S)));
J.clear();J.build(R);return R;};J._export=function(){var R=J.get_sanitized_data();var S=btoa(encodeURIComponent(JSON.stringify(R)));return S;};J._import_data=function(R){J.data=JSON.parse(decodeURIComponent(atob(R)));J.clear();J.build(J.data);return J.data;};J._export_data=function(R){var S=R?R:J.data;var T=btoa(encodeURIComponent(JSON.stringify(S)));return T;};J.clear=function(){J.content.children(".atbb-layout-group").remove();J.layouts_total=0;J.groups_total=0;};J.build=function(T){var R=T?T:{};var S=0;J.disable_toolbar();J.loading.show();setTimeout(function(){var U;if(R&&R[0]&&R[0].columns){U=new E(false,true);}g.each(R,function(V){var W=R[S];if(W&&W.columns){if(W&&(W instanceof Object||W instanceof Array)){U.addLayout(W);}}else{if(W&&W.layouts){if(W&&(W instanceof Object||W instanceof Array)){new E(W);}}}S++;});J.loading.hide();setTimeout(function(){J.enable_toolbar();J.events.trigger("builder:ready");},100);},100);};J.disable_toolbar=function(){J.controls.children().addClass("atbb-disabled");
};J.enable_toolbar=function(){J.controls.children().removeClass("atbb-disabled");};J.get_sanitized_data=function(){var T=J.content.formParams(true);var W=T[J.namespace]?T[J.namespace]:"";var R;var V={};var S=0;var U=[];if(W!==""){V={};g.each(W,function(X){if(W[X].layouts){V[S]=W[X];S++;}else{R=J.content.children(".atbb-layout-group").eq(X).data("group");if(R){U.push(R);}}});g.each(U,function(X,Y){Y.destroy();});}return V;};J.save=function(R){J.onReorder();var S=J.get_sanitized_data();if(S!==""){S.output=J.output();}else{S.output=J.output();}S["content-version"]=atbb_settings.version;g.ajax({type:"post",dataType:"json",url:N.ajax_url,data:{action:"atbb_save_layouts",nonce:N.nonce.value,post_id:N.post_id,data:R?R:S},success:function(T){J.events.trigger("savelayouts",[T]);},error:function(T,V,U){console.warn("atbb:",T,V,U);}});};J.onReorder=function(){J.content.children(".atbb-layout-group").each(function(T){var R=g(this);var V=R.find(".atbb-layout");var U=R.find(".atbb-group-editor");var S=U.find(".atbb-builder-option .atbb-data-field");
S.each(function(){var W=g(this).attr("name");var X=W.replace(/\[[0-9]+\]\[settings\]/,"["+T+"][settings]");g(this).attr("name",X);});V.each(function(X){var Y=g(this);var W=Y.find(".atbb-layout-columns").children();W.each(function(ab){var Z=g(this).find(".atbb-layout-structure-field");Z.each(function(){var ac=g(this).attr("name");var ad=ac.replace(/\[[0-9]+\]\[layouts\]\[[0-9]+\]\[structure\]\[[0-9]+\]/,"["+T+"][layouts]["+X+"][structure]["+ab+"]");g(this).attr("name",ad);});var aa=g(this).find(".atbb-widgets").children();aa.each(function(ad){var ae=g(this).data("Widget");ae.namespace=ae.namespace.replace(/\[[0-9]+\]\[layouts\]\[[0-9]+\]\[columns\]\[[0-9]+\]\[widgets\]\[[0-9]+\]/,"["+T+"][layouts]["+X+"][columns]["+ab+"][widgets]["+ad+"]");var ac=g(this).find(".atbb-data-field");ac.each(function(){var af=g(this).attr("name");var ag=af.replace(/\[[0-9]+\]\[layouts\]\[[0-9]+\]\[columns\]\[[0-9]+\]\[widgets\]\[[0-9]+\]/,"["+T+"][layouts]["+X+"][columns]["+ab+"][widgets]["+ad+"]");g(this).attr("name",ag);
});});});});});};function E(X,W){var aa=g("<div/>").addClass("atbb-layout-group");aa.header=g("<div/>").addClass("atbb-layout-group-header").appendTo(aa);aa.content=g("<div/>").addClass("atbb-layout-group-content").appendTo(aa);aa.namespace=C+"[9999][settings]";aa.toggler_btn=g("<span/>",{title:"Click to toggle"}).addClass("atbb-group-toggle fa fa-chevron-down").appendTo(aa.header);aa.title=g("<span/>").addClass("atbb-group-title").appendTo(aa.header);aa.title.data("default-section-name","Section");aa.title.text(aa.title.data("default-section-name"));aa.remover_btn=g("<span/>",{title:"Remove Section"}).addClass("atbb-group-remove fa fa-times").appendTo(aa.header);aa.editor_btn=g("<span/>",{title:"Section Settings"}).addClass("atbb-group-edit fa fa-cogs").appendTo(aa.header);aa.layout_adder_btn=g("<span/>",{title:"Add Row"}).addClass("atbb-group-add-layout fa fa-plus").appendTo(aa.header);aa.destroy=function(){aa.remove();J.groups_total--;J.onReorder();J.history.add();};aa.addLayout=function(ad){var ac=new L(ad?false:true);
if(ad){ac.set(ad);}ac.appendTo(aa.content);J.content.sortable("refresh");};aa.clear=function(){var ac=aa.content.children(".atbb-layout");ac.each(function(){var ad=g(this).data("object");ad.destroy(true);});};aa.toggle_state_option=undefined;aa.settings_storage=undefined;var U=g("<div/>",{"class":"atbb-group-editor"}).appendTo(aa);var Y=g("<div/>",{"class":"atbb-group-editor-wrapper"}).appendTo(U);var ab=g("<div/>",{"class":"atbb-group-editor-header"}).appendTo(Y);var R=g("<div/>",{"class":"atbb-group-editor-content"}).appendTo(Y);var S=g("<div/>",{"class":"atbb-group-editor-footer"}).appendTo(Y);aa.editor=R;aa.editor.title=g("<div/>",{"class":"atbb-group-editor-title"}).appendTo(ab);aa.editor.title.text("Section Settings");var V=g("<span/>",{"class":"atbb-group-editor-close fa fa-times",title:"Cancel and close the editor"}).appendTo(ab);var T=g("<span/>",{"class":"atbb-group-editor-cancel",title:"Cancel and close the editor"}).text("Cancel").appendTo(S);var Z=g("<span/>",{"class":"atbb-group-editor-save",title:"Save and close the editor"}).text("Save").appendTo(S);
aa.editor.getSettings=function(){var ae=aa.editor.formParams(true);var ac=ae[J.namespace]?ae[J.namespace]:false;var ad={};if(ac){g.each(ac,function(){if(this.settings){ad=this.settings;}});}return ad;};aa.editor.updateSettings=function(ac){aa.editor.children().remove();aa.buildEditorOptions(ac);aa.editor.updateGroupName(ac);};aa.editor.open=function(){U.show();aa.settings_storage=aa.editor.getSettings();};aa.editor.close=function(){aa.editor.updateSettings(aa.settings_storage);U.hide();};aa.editor.save=function(){aa.settings_storage=aa.editor.getSettings();U.hide();aa.editor.updateGroupName(aa.settings_storage);};aa.editor.updateGroupName=function(ac){if(ac&&ac.section_name){aa.title.text(ac.section_name);}else{aa.title.text(aa.title.data("default-section-name"));}};aa.buildEditorOptions=function(ac){aa.settings=ac?ac:{};g("<h2/>").text("Background Settings").appendTo(aa.editor);g("<em/>").html("Here you will be able to set the background media for the section, change the media size, alignment and how it behaves.").appendTo(aa.editor);
g("<hr/>").appendTo(aa.editor);new J.Option({title:"Background Media",description:"Set a background media, like an image or a video.",type:"media",name:"[bg_media]",value:aa.settings.bg_media?aa.settings.bg_media:""},aa.namespace).appendTo(aa.editor);new J.Option({title:"Background Media Opacity",description:"Set the opacity value of the background media. Where 0 is transparent and 1 is opaque.",type:"number",name:"[media_opacity]",value:aa.settings.media_opacity?aa.settings.media_opacity:0.4,step:0.1,min:0,max:1},aa.namespace).appendTo(aa.editor);new J.Option({title:"Background Color",description:"Set a background color for the section.",type:"color",name:"[bg_color]",value:aa.settings.bg_color?aa.settings.bg_color:""},aa.namespace).appendTo(aa.editor);new J.Option({title:"Text Color",description:"Set the text color for the section.",type:"color",name:"[text_color]",value:aa.settings.text_color?aa.settings.text_color:""},aa.namespace).appendTo(aa.editor);new J.Option({title:"Background Image Alignment",description:"Select the alignment fot the background image. Note: This option is used only if an image is selected.",type:"select",name:"[image_alignment]",value:aa.settings.image_alignment?aa.settings.image_alignment:"center",options:{left:"Left",center:"Center",right:"Right"}},aa.namespace).appendTo(aa.editor);
new J.Option({title:"Background Image Size",description:"Select whether the image should contain or cover the background. Note: This option is used only if an image is selected.",type:"select",name:"[image_size]",value:aa.settings.image_size?aa.settings.image_size:"cover",options:{auto:"Auto",cover:"Cover",contain:"Contain"}},aa.namespace).appendTo(aa.editor);new J.Option({title:"Background Type",description:"Select the type of the background media.",type:"select",name:"[background_type]",value:aa.settings.background_type?aa.settings.background_type:"normal",options:{normal:"Normal",parallax:"Parallax"}},aa.namespace).appendTo(aa.editor);g("<h2/>").text("General Settings").appendTo(aa.editor);g("<em/>").html("Here you can set the Section Width and additional css classes if you need to apply specific styling to the section.").appendTo(aa.editor);g("<hr/>").appendTo(aa.editor);new J.Option({title:"Section Width",description:"Select which type of width you would like this section to have.",type:"select",name:"[mode]",value:aa.settings.mode?aa.settings.mode:"normal",options:{normal:"Content Width",full:"Full Width"}},aa.namespace).appendTo(aa.editor);
new J.Option({title:"Row Width",description:"Select which type of width you would like the rows inside this section to have.",type:"select",name:"[row_mode]",value:aa.settings.row_mode?aa.settings.row_mode:"normal",options:{normal:"Content Width",full:"Full / Section Width"}},aa.namespace).appendTo(aa.editor);g("<hr/>").appendTo(aa.editor);new J.Option({title:"Section Name",description:"This is just used in the admin area to help you easily identify sections.",type:"text",name:"[section_name]",value:aa.settings.section_name?aa.settings.section_name:"",placeholder:"Example: Section of services"},aa.namespace).appendTo(aa.editor);new J.Option({title:"Section ID",description:"Set a section ID. You can use this id for anchor tags for example.",type:"text",name:"[section_id]",value:aa.settings.section_id?aa.settings.section_id:"",placeholder:"Example: services-section"},aa.namespace).appendTo(aa.editor);g("<hr/>").appendTo(aa.editor);new J.Option({title:"Additional CSS Class",description:"This applies the class-names set bellow to the section, allowing you to apply specific styling via CSS.",type:"text",name:"[class]",value:aa.settings["class"]?aa.settings["class"]:"",placeholder:"Example: awesome-css-class"},aa.namespace).appendTo(aa.editor);
aa.toggle_state_option=new J.Option({type:"hidden",name:"[toggle_state]",value:aa.settings.toggle_state?aa.settings.toggle_state:false},aa.namespace).appendTo(aa.editor);};if(X&&X.settings&&aa.settings_storage===undefined){aa.settings_storage=X.settings;}aa.editor.updateSettings(aa.settings_storage);if(aa.settings_storage&&aa.settings_storage.toggle_state==="closed"){aa.addClass("atbb-closed-group");}aa.toggle=function(){var ad=aa.editor.getSettings();if(aa.hasClass("atbb-closed-group")){aa.removeClass("atbb-closed-group");aa.toggle_state_option.find("input").val("open");var ac=aa.find(".atbb-widget");ac.each(function(){var ae=g(this).data("Widget");if(ae&&ae.trigger){ae.trigger("oncontent");}});}else{aa.addClass("atbb-closed-group");aa.toggle_state_option.find("input").val("closed");}};aa.editor_btn.on("click",function(ac){ac.preventDefault();aa.editor.open();});V.on("click",function(ac){ac.preventDefault();aa.editor.close();});T.on("click",function(ac){ac.preventDefault();aa.editor.close();
});Z.on("click",function(ac){ac.preventDefault();aa.editor.save();});aa.content.sortable({items:"> .atbb-layout",handle:".atbb-layout-controls",connectWith:".atbb-layout-group-content",tolerance:"pointer",placeholder:"atbb-layout-placeholder",start:function(ac,ad){ad.placeholder.css({height:ad.helper.outerHeight()});},stop:function(ac,ad){J.onReorder();if(J.has_DOM_updated){J.has_DOM_updated=false;J.history.add();}},update:function(){J.onReorder();J.has_DOM_updated=true;}});aa.remover_btn.on("click",function(ac){ac.preventDefault();aa.destroy();});aa.layout_adder_btn.on("click",function(ac){ac.preventDefault();aa.addLayout();});aa.toggler_btn.on("click",function(ac){ac.preventDefault();aa.toggle();});aa.header.on("dblclick",function(ac){ac.preventDefault();aa.toggle();});if(X&&X.layouts){g.each(X.layouts,function(ac){aa.addLayout(X.layouts[ac]);});}else{if(!W){aa.addLayout();}}aa.appendTo(J.content);J.content.sortable("refresh");J.groups_total++;J.onReorder();aa.data("group",aa);return aa;
}function L(S){var R=g("<div/>").addClass("atbb-layout");R.remover_btn=g("<span/>").addClass("atbb-layout-remove fa fa-trash-o").appendTo(R);R.controls=g("<ul/>").addClass("atbb-layout-controls").appendTo(R);R.columns=g("<ul/>").addClass("atbb-layout-columns").appendTo(R);R.structure=undefined;var T=[{"class":"atbb-layout-full-width",structure:["full-width-column"],"default":true},{"class":"atbb-layout-one-halfs",structure:["one-half-column","one-half-column"]},{"class":"atbb-layout-one-thirds",structure:["one-third-column","one-third-column","one-third-column"]},{"class":"atbb-layout-one-fourths",structure:["one-fourth-column","one-fourth-column","one-fourth-column","one-fourth-column"]},{"class":"atbb-layout-one-third-two-thirds",structure:["one-third-column","two-thirds-column"]},{"class":"atbb-layout-two-thirds-one-third",structure:["two-thirds-column","one-third-column"]},{"class":"atbb-layout-one-fourth-one-half-one-fourth",structure:["one-fourth-column","one-half-column","one-fourth-column"]},{"class":"atbb-layout-one-fourth-one-fourth-one-half",structure:["one-fourth-column","one-fourth-column","one-half-column"]},{"class":"atbb-layout-one-half-one-fourth-one-fourth",structure:["one-half-column","one-fourth-column","one-fourth-column"]},{"class":"atbb-layout-three-fourths-one-fourth",structure:["three-fourths-column","one-fourth-column"]},{"class":"atbb-layout-one-fourth-three-fourths",structure:["one-fourth-column","three-fourths-column"]}];
R.set=function(V,U){R.storage=[];R.namespace=C+"[9999][layouts][9999]";R.columns.children().each(function(X){R.storage[X]=[];var W=g(this);W.find(".atbb-widgets").children().each(function(Y){var Z=g(this).data("Widget");var aa=g(this).clone();R.storage[X].push(aa.data("Widget",Z));});});R.columns.children().remove();if(V.structure){g.each(V.structure,function(Z){var Y=g("<li/>",{"class":V.structure[Z]}).appendTo(R.columns);var W=g("<ul/>").addClass("atbb-widgets").appendTo(Y);var ab=g("<span/>",{title:"Add a widget"}).addClass("atbb-add-widget").appendTo(Y);var aa=g("<input/>",{type:"hidden",name:R.namespace+"[structure]["+Z+"]",value:V.structure[Z],"class":"atbb-layout-structure-field atbb-data-field"});aa.appendTo(Y);Y.data({namespace:R.namespace+"[columns]["+Z+"]",widgets_total:0});if(V.columns&&V.columns[Z]&&V.columns[Z].widgets){var X=V.columns[Z].widgets;g.each(X,function(ad){var ac=X[ad];var ae=ac["widget-template"];var af=new r(ae,Y);if(af&&af.appendTo){af.appendTo(W);J.onReorder();
af.updateSettings(ac);}});}ab.on("click",function(ac){ac.preventDefault();J.widget_selector.open();J.widget_selector.onSelect=function(ae){var ad=new r(ae,Y);if(ad&&ad.appendTo){ad.appendTo(W);J.onReorder();J.widget_selector.close();ad.updateSettings();if(ad.template.editing!==false){ad.remove_on_editor_cancel=true;ad.Edit();}}};});W.sortable({items:"> li",handle:".atbb-widget-header",connectWith:".atbb-widgets",tolerance:"pointer",placeholder:"atbb-widget-placeholder",start:function(ac,ad){ad.placeholder.css({height:ad.helper.outerHeight()});},stop:function(ac,ad){J.onReorder();if(J.has_DOM_updated){J.has_DOM_updated=false;J.history.add();}},update:function(){J.onReorder();J.has_DOM_updated=true;}});});}if(R.storage){g.each(R.storage,function(W){var X=R.storage[W];if(X){g.each(X,function(Y){var ac=X[Y].data("Widget");var Z=R.columns.children();var ab=ac.template.name;var af=Z.eq(W);if(Z.eq(W).length>0){af=Z.eq(W);}else{af=Z.eq(Z.length-1);}var ae=new r(ab,af);if(ae&&ae.appendTo){var aa=af.find(".atbb-widgets");
ae.appendTo(aa);J.onReorder();var ad=ac.getSettings();ae.updateSettings(ad);}});}});}if(T&&V.structure){g.each(T,function(W){var X=[];g.each(V.structure,function(Y){X.push(V.structure[Y]);});if(w(T[W].structure,X)){R.controls.children().removeClass("atbb-active-layout").filter("."+T[W]["class"]).addClass("atbb-active-layout");}});}J.onReorder();};R.destroy=function(U){R.remove();J.layouts_total--;J.onReorder();if(!U){J.history.add();}};g.each(T,function(U){var V=g("<li/>",{"class":T[U]["class"]}).data("structure",T[U].structure);V.appendTo(R.controls);V.on("click",function(W){W.preventDefault();R.set(T[U]);J.history.add();});if(S&&T[U]["default"]){R.set(T[U]);}});R.remover_btn.on("click",function(U){U.preventDefault();R.destroy();});R.data("object",R);J.layouts_total++;J.onReorder();return R;}function r(T,V){var ah;if(J.widgets[T]){ah=J.widgets[T];}if(!ah||!V){return false;}var X=g("<li/>",{"class":"atbb-widget"});ah.name=T;X.template=ah;X.output=ah.output;var af=g("<div/>",{"class":"atbb-widget-header"}).appendTo(X);
var aj=g("<div/>",{"class":"atbb-widget-title"}).appendTo(af);aj.text(ah.title);var aa=g("<div/>",{"class":"atbb-widget-controls"}).appendTo(af);var ag=g("<span/>",{"class":"atbb-widget-clone fa fa-files-o"}).appendTo(aa);var ac=g("<span/>",{"class":"atbb-widget-edit fa fa-pencil"}).appendTo(aa);var ai=g("<span/>",{"class":"atbb-widget-remove fa fa-times"}).appendTo(aa);X.content=g("<div/>",{"class":"atbb-widget-content"}).appendTo(X);var W=g("<div/>",{"class":"atbb-widget-editor"}).appendTo(X);var U=g("<div/>",{"class":"atbb-widget-editor-wrapper"}).appendTo(W);var Y=g("<div/>",{"class":"atbb-widget-editor-header"}).appendTo(U);var ab=g("<div/>",{"class":"atbb-widget-editor-content"}).appendTo(U);var S=g("<div/>",{"class":"atbb-widget-editor-footer"}).appendTo(U);X.remove_on_editor_cancel=false;X.editor=ab;X.settings={};X.storage={};if(ah.editing===false){ac.hide();}if(ah.cloning===false){ag.hide();}X.editor.title=g("<div/>",{"class":"atbb-widget-editor-title"}).appendTo(Y);var ad=g("<span/>",{"class":"atbb-widget-editor-close fa fa-times",title:"Cancel and close the editor"}).appendTo(Y);
var ae=g("<span/>",{"class":"atbb-widget-editor-cancel",title:"Cancel and close the editor"}).text("Cancel").appendTo(S);var R=g("<span/>",{"class":"atbb-widget-editor-save",title:"Save and close the editor"}).text("Save").appendTo(S);g("<span/>",{"class":"atbb-widget-editor-header-separator"}).appendTo(Y);X.namespace=V.data("namespace")+"[widgets]["+V.data("widgets_total")+"]";X.num=V.data("widgets_total");X.nameinput=function(ak){if(ak){return X.namespace+"["+ak+"]";}else{return undefined;}};X.setContent=function(ak){X.content.html(ak);X.content.show();setTimeout(function(){X.trigger("oncontent");},0);};var Z=g("<input/>",{"class":"atbb-widget-input atbb-data-field",type:"hidden",name:X.nameinput("widget-template"),value:ah.name});Z.appendTo(X);X.updateSettings=function(ak){ab.children().remove();Y.children(".atbb-header-control").remove();X.settings=ak?ak:{};if(typeof ah.editor==="function"){ah.editor(X);}X.trigger("onupdate");X.trigger("onsave");};X.getSettings=function(){var am=[];
var al=X.editor.formParams(true);var ak=al[J.namespace];if(ak){g.each(ak,function(){var an=this.layouts;if(an){g.each(an,function(){if(this.columns){var ao=this.columns;g.each(ao,function(){if(this.widgets){var ap=this.widgets;g.each(ap,function(){am=this;});}});}});}});}return am;};X.getOption=function(al,ak){if(X.settings[al]===undefined){return ak;}else{return X.settings[al];}};X.Clone=function(){var al=new r(ah.name,V);if(al&&al instanceof jQuery){X.after(al);J.onReorder();var ak=X.getSettings();al.updateSettings(ak);J.history.add();}};X.Edit=function(){X.editor.Open();};X.Remove=function(){X.remove();J.onReorder();};ai.on("click",function(ak){ak.preventDefault();X.Remove();J.history.add();});ag.on("click",function(ak){ak.preventDefault();X.Clone();});ac.on("click",function(ak){ak.preventDefault();X.Edit();});X.editor.HeaderControl=function(al){var ak=g("<span/>",{"class":al?al:""}).addClass("atbb-header-control").appendTo(Y);ak.setLabel=function(an){ak.children("span").remove();var am=g("<span/>").appendTo(ak);
am.text(an);};return ak;};X.Option=function(ak){return new J.Option(ak,X.namespace);};X.SortableContainer=function(am){if(!am){return false;}var ak=g("<ul/>",{"class":"atbb-widget-options-group-container"});ak.groups_total=0;ak.namespace=am;ak.bracketless_namespace=am.replace(/\[/,"").replace(/\]/,"");ak.addGroup=function(){ak.groups_total=ak.children().length;var aq=g("<li/>",{"class":"atbb-widget-options-group"});var at=g("<div/>",{"class":"atbb-widget-options-group-header"}).appendTo(aq);var ar=g("<span/>",{"class":"atbb-widget-options-group-edit fa fa-chevron-right"}).appendTo(at);aq.title=g("<div/>",{"class":"atbb-widget-options-group-header-title"}).appendTo(at);var an=g("<div/>",{"class":"atbb-widget-options-group-controls"}).appendTo(at);aq.open=false;var ap=g("<span/>",{"class":"atbb-widget-options-group-clone fa fa-files-o",title:"Clone"}).hide().appendTo(an);var ao=g("<span/>",{"class":"atbb-widget-options-group-remove fa fa-times",title:"Remove"}).appendTo(an);aq.content=g("<div/>",{"class":"atbb-widget-options-group-content"}).appendTo(aq);
aq.options=[];aq.addOption=function(aw){var ax=ak.namespace+"["+ak.groups_total+"]"+aw.name;var au=g.extend(true,{},aw);au.name=ax;var av=new X.Option(au);if(av&&av.appendTo){av.appendTo(aq.content);aq.options.push(aw);av.on("input",".atbb-data-field",function(){var ay=g(this).val();av.trigger("fieldchange",[ay]);X.trigger("onupdate");});}return av;};aq.getValues=function(){var au=[];var ax=X.getSettings();var aw=ax[ak.bracketless_namespace];var av=aq.index();au=aw[av];return au;};aq.toggle=function(av){var au="closed";if(av==="close"){aq.removeClass("atbb-options-group-open");}else{if(av==="open"){aq.removeClass("atbb-options-group-open");aq.addClass("atbb-options-group-open");}else{aq.toggleClass("atbb-options-group-open");}}if(aq.hasClass("atbb-options-group-open")){aq.find(".atbb-builder-option").find("textarea").each(function(){g(this).buildMCEEditor();});au="open";aq.open=true;}else{aq.find(".atbb-builder-option").find("textarea").each(function(){g(this).destroyMCEEditor();});au="closed";
aq.open=false;}aq.trigger("grouptoggle",[au]);};ar.on("click",function(au){au.preventDefault();aq.toggle();});at.on("dblclick",function(au){au.preventDefault();aq.toggle();});ao.on("click",function(au){au.preventDefault();aq.Remove();});aq.Remove=function(){aq.remove();ak.refresh();};aq.onClone=function(au){if(typeof(au)==="function"){ap.show();ap.on("click",function(av){av.preventDefault();var aw;if(aq.open){aq.toggle("close");aw=au(aq.getValues());aq.toggle("open");}else{aw=au(aq.getValues());}aq.after(aw);});}};aq.appendTo(ak);aq.data("group",aq);ak.refresh();return aq;};ak.refresh=function(){var an=ak.children(".atbb-widget-options-group");an.each(function(ap){var ao=g(this).find(".atbb-data-field");ao.each(function(){var aq=g(this).attr("name");var av=ak.namespace.replace(/\[/,"\\[").replace(/\]/,"\\]");var au=new RegExp(av+"\\[[0-9]+\\]");var ar=ak.namespace+"["+ap+"]";var at=aq.replace(au,ar);g(this).attr("name",at);});});al();};ak.sortable({items:"> li.atbb-widget-options-group",handle:".atbb-widget-options-group-header, .atbb-widget-options-group-handle",tolerance:"pointer",placeholder:"atbb-widget-options-group-placeholder",start:function(an,ao){ao.placeholder.css({height:ao.helper.height(),width:ao.helper.width(),});
},stop:function(an,ao){ak.refresh();}});function al(){setTimeout(function(){X.trigger("onupdate");},0);}ak.getGroups=function(){var an=[];ak.children("li.atbb-widget-options-group").each(function(){an.push(g(this).data("group"));});return an;};ak.data("container",ak);return ak;};X.editor.Open=function(){X.storage=X.getSettings();W.find(".atbb-builder-option").not(".atbb-widget-options-group .atbb-builder-option").find("textarea").each(function(){g(this).buildMCEEditor();});W.show();};X.editor.Close=function(){W.hide();W.find(".atbb-builder-option").find("textarea").each(function(){g(this).destroyMCEEditor();});g(".atbb-widget-options-group").each(function(){var ak=g(this).data("group");if(ak&&ak.toggle){ak.toggle("close");}});X.updateSettings(X.storage);if(X.remove_on_editor_cancel){X.Remove();X.remove_on_editor_cancel=false;}};X.editor.Save=function(){W.hide();W.find(".atbb-builder-option").find("textarea").each(function(){g(this).destroyMCEEditor();});g(".atbb-widget-options-group").each(function(){var ak=g(this).data("group");
if(ak&&ak.toggle){ak.toggle("close");}});X.remove_on_editor_cancel=false;X.trigger("onsave");J.history.add();};ad.on("click",function(ak){ak.preventDefault();X.editor.Close();});ae.on("click",function(ak){ak.preventDefault();X.editor.Close();});R.on("click",function(ak){ak.preventDefault();X.editor.Save();});V.data("widgets_total",parseInt(V.data("widgets_total"),10)+1);X.data("Widget",X);return X;}J.output=function(){var U=[];var R="";var S=J.get_sanitized_data();if(!g.isEmptyObject(S)){R+='<div class="atticthemes-box-builder-content">';g.each(S,function(ac){var ai=this.layouts;var Z=this.settings;var af="";var aa=["atbb-section"];var ag=[];var ab=["section-background-media-container"];var Y="";var ae="";var ah=1;var W="";if(Z){if(Z.bg_media&&Z.bg_media.url){Y=Z.bg_media.url;if(Z.image_alignment){ab.push("section-media-align-"+Z.image_alignment);}if(Z.image_size){ab.push("section-media-size-"+Z.image_size);}if(Z.background_type){ab.push("section-media-background-type-"+Z.background_type);
}if(Z.bg_media.mime){W=Z.bg_media.mime;}aa.push("section-background");if(Z.bg_media.type){aa.push("section-background-"+Z.bg_media.type);}if(Z.media_opacity){ah=Z.media_opacity;}ae='<div data-opacity="'+ah+'" data-type="'+Z.bg_media.type+'" data-src="'+Y+'" data-mime="'+W+'" class="'+ab.join(" ")+'"></div>';}if(Z.mode){aa.push("section-"+Z.mode+"-width");}if(Z.bg_color&&Z.bg_color!==""){aa.push("section-background");ag.push("background-color:"+Z.bg_color+";");var ad=I(Z.bg_color);var X=Math.round(((parseInt(ad[0])*299)+(parseInt(ad[1])*587)+(parseInt(ad[2])*114))/1000);if(X>175){aa.push("section-background-light");}else{aa.push("section-background-dark");}}if(Z.text_color&&Z.text_color!==""){ag.push("color:"+Z.text_color+";");}if(Z.row_mode){aa.push("section-rows-"+Z.row_mode);}if(Z["class"]){aa.push(Z["class"]);}if(Z.section_id){af='id="'+Z.section_id+'"';}}aa=x(aa);R+="<div "+af+' style="'+ag.join(" ")+'" class="'+aa.join(" ")+'">';if(ai){g.each(ai,function(al){R+='<div class="atbb-row">';
if(this.columns){var ak=this.structure;var aj=this.columns;g.each(ak,function(an){var ao=parseInt(an,10)==(A(ak)-1)?"last":"";R+='<div class="block '+this+" "+ao+'">';if(aj[an]!==undefined&&aj[an].widgets){var am=aj[an].widgets;g.each(am,function(ar){U=this;var at=J.content.children(".atbb-layout-group").eq(ac);var aq=at.find(".atbb-layout").eq(al);var av=aq.find(".atbb-layout-columns").children("li").eq(an);var ap=av.find(".atbb-widgets").children("li").eq(ar);var au=ap.data("Widget");if(au&&typeof au.output==="function"){R+=au.output(au,Z).trim();}});}R+="</div>";});}R+="</div>";});}R+=ae;R+="</div>";});R+="</div>";}if(window.tinymce&&!tinymce.get("content")){s();}if(window.tinymce&&typeof tinymce.get==="function"&&tinymce.get("content") instanceof tinymce.Editor){s();var T=tinymce.get("content");var V=g("<div/>").html(T.getContent({format:"raw"}));if(!g.isEmptyObject(S)||V.find(".atticthemes-box-builder-content").length>0){T.setContent(R,{format:"raw"});T.save();}}else{g("textarea#content").val(R);
}if(J.content_version_field instanceof jQuery&&J.content_version_field.length>0){J.content_version_field.val(atbb_settings.version);}return R;};function s(){if(switchEditors&&switchEditors.go){switchEditors.go("content","tmce");if(g(".atbb-switch-builder").hasClass("atbb-switch-builder-active")){}}}function B(){var R=this;R.limit=0;R.history=[];R.now=0;R.entries=0;R.onChange=function(){};R.add=function(S){if(R.history.length<R.limit||R.limit===0){var U;if(S!==undefined){U=S;}else{U=J.get_sanitized_data();}var T=g.extend(true,{},U);if(T.output!==undefined){delete T.output;}R.history.splice(R.now+1,Number.MAX_VALUE,T);R.now=R.history.length-1;R.entries=R.history.length;R.onChange();}};R.undo=function(){if(R.now>0){var T={};var S=R.now--;if(R.history[S]){T=R.history[R.now];R.onChange();return T;}else{return false;}}};R.redo=function(){if(R.now<R.entries){var T={};var S=R.now++;if(R.history[S]){T=R.history[R.now];R.onChange();return T;}else{return false;}}};return R;}function t(){var R=g(".atbb-widget-selector");
var S=g(".atbb-widget-selector-widget-list",R);var T=g(".atbb-widget-selector-close",R);R.open=function(){g.each(J.widgets,function(U){if(!J.widgets[U].title||!J.widgets[U]["class"]||!J.widgets[U].output){return;}var V=g("<li/>",{"class":"atbb-widget-selector-"+J.widgets[U]["class"],title:J.widgets[U].title}).appendTo(S);V.on("click",function(W){R.onSelect(U);});});R.show();};R.close=function(){R.hide();S.children().remove();};R.onSelect=function(U){};T.on("click",function(U){U.preventDefault();R.close();});return R;}function y(){var U=g(".atbb-extension-container > .atbb-icon-selector");if(U.length>0){return U.data("icon_selector");}var R=g("<div/>",{"class":"atbb-icon-selector"});var X=g("<div/>",{"class":"atbb-icon-selector-wrapper"}).appendTo(R);var W=g("<div/>",{"class":"atbb-icon-selector-header"}).appendTo(X);g("<span/>",{"class":"atbb-icon-selector-title"}).appendTo(W);R.closer=g("<span/>",{"class":"atbb-icon-selector-close fa fa-times"}).appendTo(W);var T=g("<div/>",{"class":"atbb-icon-selector-content"}).appendTo(X);
R.list=g("<ul/>",{"class":"atbb-services-icons-list"}).appendTo(T);var Y=["f042","f170","f037","f039","f036","f038","f0f9","f13d","f17b","f209","f103","f100","f101","f102","f107","f104","f105","f106","f179","f187","f1fe","f0ab","f0a8","f01a","f190","f18e","f01b","f0a9","f0aa","f063","f060","f061","f062","f047","f0b2","f07e","f07d","f069","f1fa","f1b9","f04a","f05e","f19c","f080","f02a","f0c9","f236","f0fc","f1b4","f1b5","f0f3","f0a2","f1f6","f1f7","f206","f1e5","f1fd","f171","f172","f15a","f032","f0e7","f1e2","f02d","f02e","f097","f0b1","f188","f1ad","f0f7","f0a1","f140","f207","f20d","f1ba","f1ec","f073","f133","f030","f083","f0d7","f0d9","f0da","f150","f191","f152","f151","f0d8","f218","f217","f20a","f1f3","f1f2","f1f1","f1f4","f1f5","f1f0","f0a3","f0c1","f127","f00c","f058","f05d","f14a","f046","f13a","f137","f138","f139","f078","f053","f054","f077","f1ae","f111","f10c","f1ce","f1db","f0ea","f017","f00d","f0c2","f0ed","f0ee","f157","f121","f126","f1cb","f0f4","f013","f085","f0db","f075","f0e5","f086","f0e6","f14e","f066","f20e","f0c5","f1f9","f09d","f125","f05b","f13c","f1b2","f1b3","f0c4","f0f5","f0e4","f210","f1c0","f03b","f1a5","f108","f1bd","f219","f1a6","f155","f192","f019","f17d","f16b","f1a9","f044","f052","f141","f142","f1d1","f0e0","f003","f199","f12d","f153","f0ec","f12a","f06a","f071","f065","f08e","f14c","f06e","f070","f1fb","f09a","f230","f082","f049","f050","f1ac","f182","f0fb","f15b","f1c6","f1c7","f1c9","f1c3","f1c5","f1c8","f016","f1c1","f1c4","f15c","f0f6","f1c2","f008","f0b0","f06d","f134","f024","f11e","f11d","f0c3","f16e","f0c7","f07b","f114","f07c","f115","f031","f211","f04e","f180","f119","f1e3","f11b","f0e3","f154","f06b","f1d3","f1d2","f09b","f113","f092","f184","f000","f0ac","f1a0","f0d5","f0d4","f1ee","f19d","f0c0","f0fd","f1d4","f0a7","f0a5","f0a4","f0a6","f0a0","f1dc","f025","f004","f08a","f21e","f1da","f015","f0f8","f13b","f20b","f03e","f01c","f03c","f129","f05a","f156","f16d","f208","f033","f1aa","f1cc","f084","f11c","f159","f1ab","f109","f202","f203","f06c","f212","f094","f149","f148","f1cd","f0eb","f201","f0e1","f08c","f17c","f03a","f022","f0cb","f0ca","f124","f023","f175","f177","f178","f176","f0d0","f076","f064","f112","f122","f183","f041","f222","f227","f229","f22b","f22a","f136","f20c","f23a","f0fa","f11a","f223","f130","f131","f068","f056","f146","f147","f10b","f0d6","f186","f21c","f001","f22c","f1ea","f19b","f18c","f1fc","f1d8","f1d9","f0c6","f1dd","f04c","f1b0","f1ed","f040","f14b","f095","f098","f200","f1a7","f1a8","f0d2","f231","f0d3","f072","f04b","f144","f01d","f1e6","f067","f055","f0fe","f196","f011","f02f","f12e","f1d6","f029","f128","f059","f10d","f10e","f1d0","f074","f1b8","f1a1","f1a2","f021","f18b","f01e","f079","f018","f135","f0e2","f158","f09e","f143","f002","f010","f00e","f213","f233","f1e0","f1e1","f14d","f045","f132","f21a","f214","f07a","f090","f08b","f012","f215","f0e8","f216","f17e","f198","f1de","f1e7","f118","f0dc","f15d","f15e","f160","f161","f0de","f0dd","f162","f163","f1be","f197","f110","f1b1","f1bc","f0c8","f096","f18d","f16c","f005","f089","f123","f006","f1b6","f1b7","f048","f051","f0f1","f04d","f21d","f0cc","f1a4","f1a3","f12c","f239","f0f2","f185","f12b","f0ce","f10a","f02b","f02c","f0ae","f1d5","f120","f034","f035","f00a","f009","f00b","f08d","f165","f088","f087","f164","f145","f057","f05c","f043","f204","f205","f238","f224","f225","f1f8","f014","f1bb","f181","f091","f0d1","f195","f1e4","f173","f174","f1e8","f099","f081","f0e9","f0cd","f09c","f13e","f093","f007","f0f0","f234","f21b","f235","f221","f226","f228","f237","f03d","f194","f1ca","f189","f027","f026","f028","f1d7","f18a","f232","f193","f1eb","f17a","f19a","f0ad","f168","f169","f19e","f1e9","f167","f16a","f166"];
for(var S=0;S<Y.length;S++){var V=Y[S];g("<li/>",{"class":"fa atbb-services-icon","data-char":V}).html("&#x"+V+";").appendTo(R.list);}R.close=function(){R.hide();};R.open=function(){R.show();};R.closer.on("click",function(){R.close();});R.list.children().on("click",function(){var Z=g(this).attr("data-char");R.trigger("onselect",[Z]);R.close();});R.hide().appendTo(g(".atbb-extension-container"));R.data("icon_selector",R);return R;}function D(){J.exporter=new G("exporter",{save:false,title:"Export"});g("<h4/>").text("Copy the text below.").appendTo(J.exporter.content);g("<em/>").text("Click on the text box to select all the contents, then copy.").appendTo(J.exporter.content);var S=g("<textarea/>").appendTo(J.exporter.content);S.prop("readonly",true);J.exporter.on("window:open",function(){var T=J._export();S.val(T);setTimeout(function(){R();},10);});function R(){setTimeout(function(){S.select().scrollTop(0);},10);}S.on("mousedown",R);return J.exporter;}function u(){J.importer=new G("importer",{save:{label:"Import",title:"Import and close the window"},title:"Import"});
g("<h4/>").text("Paste the text below.").appendTo(J.importer.content);g("<em/>").text("Paste the text copied during export into the textarea below. Note: All the current content will be overridden with the imported data.").appendTo(J.importer.content);var R=g("<textarea/>").appendTo(J.importer.content);J.importer.on("window:save",function(){try{J._import(R.val());J.history.add();}catch(S){console.warn("Could not import the data.");alert("Could not import the data.");}});J.importer.on("window:open",function(){R.val("");setTimeout(function(){R.focus();},10);});return J.importer;}function G(X,S){var R=g(".atbb-extension-container > #"+X);if(R.length>0){return R.data("window");}var V={title:"",save:{label:"OK",title:"Save and close the window"},cancel:{label:"Close",title:"Close the window"},};var T=g.extend(true,{},V,S);var U=g("<div/>",{"class":"atbb-window",id:X});var W=g("<div/>",{"class":"atbb-window-wrapper"}).appendTo(U);U.buttons={};U.header=g("<div/>",{"class":"atbb-window-header"}).appendTo(W);
U.title=g("<span/>",{"class":"atbb-window-title"}).text(T.title).appendTo(U.header);U.buttons.close=g("<span/>",{"class":"atbb-window-close fa fa-times"}).appendTo(U.header);U.content=g("<div/>",{"class":"atbb-window-content"}).appendTo(W);U.footer=g("<div/>",{"class":"atbb-window-footer"}).appendTo(W);if(T.cancel){U.buttons.cancel=g("<span/>",{"class":"atbb-window-cancel",title:T.cancel.title}).text(T.cancel.label).appendTo(U.footer).on("click",function(Y){Y.preventDefault();U.close();});}if(T.save){U.buttons.save=g("<span/>",{"class":"atbb-window-save",title:T.save.title}).text(T.save.label).appendTo(U.footer).on("click",function(Y){Y.preventDefault();U.save();});}U.close=function(){U.trigger("window:close");U.hide();};U.open=function(){U.trigger("window:open");U.show();};U.save=function(){U.trigger("window:save");U.close();};U.buttons.close.on("click",function(Y){Y.preventDefault();U.close();});U.hide().appendTo(g(".atbb-extension-container"));U.data("window",U);return U;}J.Option=function(ai,ac){if(ai.name===""){return false;
}var ad=g("<div/>").addClass("atbb-builder-option");var ab=g();var Z={name:undefined,value:"",type:"text",placeholder:undefined,options:undefined,title:undefined,button:undefined,description:undefined,block:undefined,rows:3,step:undefined,min:undefined,max:undefined};var aj=g.extend(true,{},Z,ai);if(aj.block!==undefined){ad.addClass("atbb-block").addClass(aj.block);}if(aj.title!==undefined){g("<h4/>").text(aj.title).appendTo(ad);}if(aj.description!==undefined){g("<em/>").text(aj.description).appendTo(ad);}if(aj.type==="select"&&aj.options){ab=g("<select/>").attr({name:ac+aj.name});for(var ag in aj.options){g("<option/>").attr({value:ag}).appendTo(ab).text(aj.options[ag]);}ab.data("settings",aj).addClass("atbb-data-field").appendTo(ad).val(aj.value).trigger("change");}else{if(aj.type==="textarea"){ab=g("<textarea/>").attr({name:ac+aj.name,rows:aj.rows}).data("settings",aj).addClass("atbb-data-field").appendTo(ad).val(aj.value).trigger("change");}else{if(aj.type==="checkbox"){ab=g("<input/>").attr({name:ac+aj.name,value:true,type:aj.type}).data("settings",aj).addClass("atbb-data-field").appendTo(ad);
if(aj.value&&aj.value!==""){ab.prop("checked",aj.value);}}else{if(aj.type==="mce"||aj.type==="wp_editor"){ab=g("<textarea/>").attr({name:ac+aj.name,rows:aj.rows}).data("settings",aj).addClass("atbb-mce-editor atbb-data-field").appendTo(ad).val(aj.value).trigger("change");}else{if(aj.type==="media"){var X=g("<div/>",{"class":"atbb-media-field-wrapper"}).appendTo(ad);ab=g("<input/>").attr({name:ac+aj.name+"[url]",value:aj.value.url,type:"text",placeholder:aj.placeholder}).data("settings",aj).addClass("atbb-data-field atbb-media-field").appendTo(X);var V=g("<input/>").attr({name:ac+aj.name+"[id]",value:aj.value.id,type:"hidden"}).addClass("atbb-data-field").appendTo(X).trigger("change");var ah=g("<input/>").attr({name:ac+aj.name+"[mime]",value:aj.value.mime,type:"hidden"}).addClass("atbb-data-field").appendTo(X).trigger("change");var W=g("<input/>").attr({name:ac+aj.name+"[type]",value:aj.value.type,type:"hidden"}).addClass("atbb-data-field").appendTo(X).trigger("change");var U=g("<input/>").attr({name:ac+aj.name+"[width]",value:aj.value.width,type:"hidden"}).addClass("atbb-data-field").appendTo(X).trigger("change");
var Y=g("<input/>").attr({name:ac+aj.name+"[height]",value:aj.value.height,type:"hidden"}).addClass("atbb-data-field").appendTo(X).trigger("change");var R=g("<input/>").attr({name:ac+aj.name+"[thumbnail]",value:aj.value.thumbnail?aj.value.thumbnail:"",type:"hidden"}).addClass("atbb-data-field").appendTo(X).trigger("change");var ae=g("<input/>").attr({name:ac+aj.name+"[medium]",value:aj.value.medium?aj.value.medium:"",type:"hidden"}).addClass("atbb-data-field").appendTo(X).trigger("change");var S=g("<input/>").attr({name:ac+aj.name+"[large]",value:aj.value.large?aj.value.large:"",type:"hidden"}).addClass("atbb-data-field").appendTo(X).trigger("change");var T=g("<span/>",{"class":"atbb-media-field-button fa fa-folder-open"}).appendTo(X);var af=g("<span/>",{"class":"atbb-media-field-clear fa fa-times"}).appendTo(X).hide();T.on("click",function(am){var al=new BoxBuilderMediaWindow();al.on("mediaselect",function(ao,an){V.val(an.id!==undefined?an.id:"");ah.val(an.mime!==undefined?an.mime:"");
W.val(an.type!==undefined?an.type:"");U.val(an.width!==undefined?an.width:"");Y.val(an.height!==undefined?an.height:"");R.val("");ae.val("");S.val("");if(an.sizes!==undefined&&an.sizes.thumbnail!==undefined){R.val(an.sizes.thumbnail.url!==undefined?an.sizes.thumbnail.url:"");}if(an.sizes!==undefined&&an.sizes.medium!==undefined){ae.val(an.sizes.medium.url!==undefined?an.sizes.medium.url:"");}if(an.sizes!==undefined&&an.sizes.large!==undefined){S.val(an.sizes.large.url!==undefined?an.sizes.large.url:"");}ab.val(an.url!==undefined?an.url:"").trigger("change");af.show();ab.attr({readonly:"true"});});});if(aj.value.id&&aj.value.type){af.show();ab.attr({readonly:"true"});}af.on("click",function(al){al.preventDefault();g(this).hide();ab.removeAttr("readonly");ab.val("");V.val("");W.val("");U.val("");Y.val("");ah.val("");R.val("");ab.trigger("change");});ab.on("change",function(){X.find(".atbb-media-wrapper").remove();if(W.val()==="image"||K(ab.val())){var am=g("<div/>",{"class":"atbb-media-wrapper"}).appendTo(X);
var al=g("<span/>",{"class":"atbb-media-toggle-button fa fa-caret-down"}).appendTo(am);g("<div/>",{"class":"atbb-media-thumbnail"}).css({"background-image":"url("+g(this).val()+")"}).appendTo(am);al.on("click",function(an){an.preventDefault();am.toggleClass("atbb-media-wrapper-open");if(am.hasClass("atbb-media-wrapper-open")){al.removeClass("fa-caret-down");al.addClass("fa-caret-up");}else{al.removeClass("fa-caret-up");al.addClass("fa-caret-down");}});}});ab.trigger("change");}else{if(aj.type==="icon"){var ak=g("<div/>",{"class":"atbb-icon-selector-button"}).appendTo(ad);ab=g("<input/>").attr({name:ac+aj.name,value:aj.value,type:"hidden"}).data("settings",aj).addClass("atbb-data-field").appendTo(ad).trigger("change");ak.on("click",function(){var al=new y();if(al.open!==undefined){al.open();al.find(".atbb-services-icon").removeClass("atbb-selected-icon").filter('[data-char="'+ab.val()+'"]').addClass("atbb-selected-icon");}al.off("onselect");al.on("onselect",function(an,am){ab.val(am);ak.html("&#x"+am+";");
al.find(".atbb-services-icon").removeClass("atbb-selected-icon").filter('[data-char="'+am+'"]').addClass("atbb-selected-icon");});});if(aj.value!==undefined&&aj.value!==""){ak.html("&#x"+aj.value+";");}}else{if(aj.type==="color"){ab=g("<input/>").attr({name:ac+aj.name,value:aj.value,type:"text",}).data("settings",aj).addClass("atbb-data-field").appendTo(ad).trigger("change");if(ab.wpColorPicker&&typeof(ab.wpColorPicker)==="function"){ab.wpColorPicker();}}else{ab=g("<input/>").attr({name:ac+aj.name,value:aj.value,type:aj.type,placeholder:aj.placeholder}).data("settings",aj).addClass("atbb-data-field").appendTo(ad).trigger("change");if(aj.step!==undefined){ab.attr({step:aj.step});}if(aj.min!==undefined){ab.attr({min:aj.min});}if(aj.max!==undefined){ab.attr({max:aj.max});}}}}}}}}var aa="change";if(aj.type!=="select"&&aj.type!=="checkbox"){aa="input";}ad.on(aa,".atbb-data-field",function(){var al=g(this).val();ad.trigger("fieldchange",[al]);});ad.field=ab;return ad;};function x(R){var U={},T=[];
for(var V=0,S=R.length;V<S;++V){if(U.hasOwnProperty(R[V])){continue;}T.push(R[V]);U[R[V]]=1;}return T;}function I(R){R=(R.substr(0,1)=="#")?R.substr(1):R;return[parseInt(R.substr(0,2),16),parseInt(R.substr(2,2),16),parseInt(R.substr(4,2),16)];}function w(S,R){if(S.length!==R.length){return false;}for(var T=S.length;T--;){if(S[T]!==R[T]){return false;}}return true;}function A(T){var S=0;for(var R in T){if(T.hasOwnProperty(R)){S++;}}return S;}function K(R){return(R.match(/\.(jpeg|jpg|gif|png)$/)!==null);}F();return this;}window.BoxBuilderMediaWindow=function(r){var t;var e=g("<span/>");var s=g.extend({title:"Select Media",button:false,library:false,},r);if(t){t.open();return;}t=wp.media.frames.file_frame=wp.media({title:s.title,button:{text:s.button?s.button:g(this).data("uploader_button_text")},library:{type:s.library?s.library:"image, video"},multiple:false});t.on("select",function(){var u=t.state().get("selection").first().toJSON();e.trigger("mediaselect",[u]);});t.open();return e;};g.fn.buildMCEEditor=function(){var t=this;
if(!t.is("textarea")||t.hasClass("atbb-has-mce-editor")){return;}if(!tinyMCEPreInit||!tinyMCEPreInit.mceInit||!tinyMCEPreInit.mceInit.content){return false;}if(!tinyMCEPreInit||!tinyMCEPreInit.qtInit||!tinyMCEPreInit.qtInit.content){return false;}wpActiveEditor="";var x="mce-editor-"+Date.now();t.attr("id",x);var e=t.parent(".atbb-builder-option");var B=!isNaN(parseInt(t.css("line-height")))?parseInt(t.css("line-height")):24;var C=parseInt(t.attr("rows")?t.attr("rows"):5,10)*B;t.css({"min-height":C});var y=g("<div/>").attr({id:"wp-"+x+"-wrap"}).addClass("wp-core-ui wp-editor-wrap html-active").appendTo(e).css({visibility:"hidden"});var s=g("<div/>").attr({id:"wp-"+x+"-editor-tools"}).addClass("wp-editor-tools hide-if-no-js").appendTo(y);var r=g("<div/>").addClass("wp-editor-tabs").appendTo(s);g("<button/>").attr({id:x+"-tmce","data-wp-editor-id":x,}).addClass("wp-switch-editor switch-tmce").text("Visual").appendTo(r).on("click",function(){if(switchEditors&&switchEditors.go){switchEditors.go(x,"tmce");
}return false;});g("<button/>").attr({id:x+"-html","data-wp-editor-id":x,}).addClass("wp-switch-editor switch-html").text("Text").appendTo(r).on("click",function(){if(switchEditors&&switchEditors.go){switchEditors.go(x,"html");}return false;});var A=g("<div/>").attr({id:"wp-"+x+"-media-buttons"}).addClass("wp-media-buttons").appendTo(s);var w=g("<a/>").attr({"data-editor":x,title:"Add Media"}).addClass("button insert-media add_media").html('<span class="wp-media-buttons-icon"></span> Add Media').appendTo(A);w.on("click",function(){wpActiveEditor=x;});var z=g("<div/>").attr({id:"wp-"+x+"-editor-container"}).addClass("wp-editor-container").appendTo(y);t.appendTo(z);function v(){for(var D in tinyMCEPreInit.mceInit){tinyMCEPreInit.mceInit[x]=g.extend(true,{},tinyMCEPreInit.mceInit[D]);if(tinyMCEPreInit.mceInit[x].selector&&tinyMCEPreInit.mceInit[x].plugins){tinyMCEPreInit.mceInit[x].plugins=tinyMCEPreInit.mceInit[x].plugins.replace(",wpfullscreen","");tinyMCEPreInit.mceInit[x].plugins=tinyMCEPreInit.mceInit[x].plugins.replace(",fullscreen","");
}if(tinyMCEPreInit.mceInit[x].selector&&tinyMCEPreInit.mceInit[x].toolbar1){tinyMCEPreInit.mceInit[x].toolbar1=tinyMCEPreInit.mceInit[x].toolbar1.replace(",wp_fullscreen","");tinyMCEPreInit.mceInit[x].toolbar1=tinyMCEPreInit.mceInit[x].toolbar1.replace(",dfw","");}tinyMCEPreInit.mceInit[x].selector="#"+x;tinyMCEPreInit.mceInit[x].elements=x;tinyMCEPreInit.mceInit[x].body_class=x;tinyMCEPreInit.mceInit[x].resize=true;tinyMCEPreInit.mceInit[x].setup=function(F){try{F.on("init",function(H){u();});}catch(G){F.onInit.add(function(H){u();});console.log("Falling back to old tinymce init event.");}};try{tinymce.init(tinyMCEPreInit.mceInit[x]);t.addClass("atbb-has-mce-editor");}catch(E){console.log("Could not initiate mceEditor on the textfield:",x,E);}break;}}function u(){for(var E in tinyMCEPreInit.qtInit){tinyMCEPreInit.qtInit[x]=g.extend(true,{},tinyMCEPreInit.qtInit[E]);tinyMCEPreInit.qtInit[x].id=x;tinyMCEPreInit.qtInit[x].buttons=tinyMCEPreInit.qtInit[x].buttons.replace(",fullscreen","");
tinyMCEPreInit.qtInit[x].buttons=tinyMCEPreInit.qtInit[x].buttons.replace(",dfw","");try{quicktags(tinyMCEPreInit.qtInit[x]);QTags._buttonsInit();textarea.addClass("atbb-has-quicktag-editor");}catch(D){}break;}if(switchEditors&&switchEditors.go){switchEditors.go(x,"html");switchEditors.go(x,"tmce");}setTimeout(function(){y.css({visibility:"visible"});y.find("#"+x+"_ifr").css({"min-height":C});},100);}v();t.data("editor",t);return t;};g.fn.destroyMCEEditor=function(){var s=this;if(!s.is("textarea")||!s.hasClass("atbb-has-mce-editor")){return;}if(!tinyMCEPreInit||!tinyMCEPreInit.mceInit||!tinyMCEPreInit.mceInit.content){return false;}if(!tinyMCEPreInit||!tinyMCEPreInit.qtInit||!tinyMCEPreInit.qtInit.content){return false;}var e=s.attr("id");var r="";function u(){if(window.tinymce&&typeof tinymce.get==="function"&&tinymce.get(e) instanceof tinymce.Editor){var w=tinymce.get(e);if(switchEditors&&switchEditors.go){switchEditors.go(e,"tmce");}r=w.save();if(switchEditors!==undefined&&typeof switchEditors.wpautop==="function"){var v=switchEditors.pre_wpautop(r);
var x=switchEditors.wpautop(v);r=x;}}}u();function t(){delete tinyMCEPreInit.mceInit[s.attr("id")];delete tinyMCEPreInit.qtInit[s.ID];tinymce.remove(tinymce.get(e));var w=g(".atbb-builder-option").has(s);var v=g(".wp-editor-wrap").has(s);s.appendTo(w);s.val(r);s.removeAttr("style").removeClass("atbb-has-quicktag-editor").removeClass("atbb-has-mce-editor");v.remove();}t();return s;};var o=/[^\[\]]+/g;var n=function(e){if(g.isNumeric(e)){return parseFloat(e);}else{if(e==="true"){return true;}else{if(e==="false"){return false;}else{if(e===""||e===null){return undefined;}}}}return e;};var q=function(t,s,v,w,u,e,x){var r=w.shift();x=x?x+"."+r:r;if(w.length){if(!v[r]){v[r]={};}q(t,s,v[r],w,u,e,x);}else{if(x in e&&s!="radio"&&!g.isArray(v[r])){if(r in v){v[r]=[v[r]];}else{v[r]=[];}}else{e[x]=true;}if((s=="radio"||s=="checkbox")&&!t.is(":checked")){return;}if(!v[r]){v[r]=u;}else{v[r].push(u);}}};g.fn.extend({formParams:function(r){var e;if(Boolean(r)===r){e=r;r=null;}if(r){return this.setParams(r);
}else{return this.getParams(e);}},setParams:function(e){this.find("[name]").each(function(){var s=g(this),r=e[s.attr("name")];if(r!==undefined){if(s.is(":radio")){if(s.val()==r){s.attr("checked",true);}}else{if(s.is(":checkbox")){r=g.isArray(r)?r:[r];if(g.inArray(s.val(),r)>-1){s.attr("checked",true);}}else{s.val(r);}}}});},getParams:function(s){var r={};var e={};this.find("[name]:not(:disabled)").each(function(){var x=g(this),u=x.attr("type"),t=x.attr("name"),v=x.val(),w;if(u=="submit"||!t){return;}w=t.match(o);if(!w.length){w=[t];}if(s){v=n(v);}q(x,u,r,w,v,e);});return r;}});g(window).load(function(){g(".atbb-switch-builder").show();if(atbb_settings!==undefined&&atbb_settings.data!==""){}});})(jQuery);